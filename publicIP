#! /bin/bash

# Check connections
wired="$(cat /sys/class/net/e*/operstate)"
private=$(ip a | grep `ls /sys/class/net/ | grep -v lo` | grep 'inet ' | awk '{print $2}')

[ "$wired" == "down" ] && echo "Internet Disconnected"

if [ "$(nmcli c s  | grep tun)" ]; then
	server=$(protonvpn status | grep -E "IP:|Server:" | awk '{print $2}' | tr '\n' ' ' | awk '{print $2": "$1}')
	echo "$server"
else
	IP=$(wget --no-check-certificate -q -O- https://api.ipify.org)
	echo -e "$IP | $private"
	echo && echo "#ff0000"
fi
